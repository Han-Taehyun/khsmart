<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ultarischool.usercode">


	<!-- 중분류에 따라서 code, codename -->
	<select id="getUsercodeListByCode2"
		parameterType="com.ultarischool.usercode.UsercodeExample"
		resultType="com.ultarischool.usercode.UsercodeVO">
		SELECT code, codename from usercode where code2 = #{code2};
	</select>


	<insert id="insertCodet"
		parameterType="com.ultarischool.usercode.UsercodeVO">

		insert into usercode ( code1,code2,code3,codename,code)
		values (#{code1,jdbcType=VARCHAR}, #{code2,jdbcType=VARCHAR},
		#{code3,jdbcType=VARCHAR},
		#{codename,jdbcType=VARCHAR},#{code,jdbcType=VARCHAR})
	</insert>

	<update id="updateCodet"
		parameterType="com.ultarischool.usercode.UsercodeVO">

		update usercode

		<set>

			<if test="code1 != null">
				#{code1,jdbcType=VARCHAR},
			</if>

			<if test="code2 != null">
				#{code2,jdbcType=VARCHAR},
			</if>

			<if test="code3 != null">
				#{code3,jdbcType=VARCHAR},
			</if>

			<if test="codename != null">
				#{codename,jdbcType=VARCHAR},
			</if>

			<if test="code != null">
				#{code,jdbcType=VARCHAR},
			</if>

		</set>

		where id = #{id,jdbcType=INTEGER}


	</update>

	<select id="selectAllCode"
		parameterType="com.ultarischool.usercode.UsercodeExample"
		resultType="com.ultarischool.usercode.UsercodeVO">
		SELECT id,code,codename,code1,code2,code3 FROM usercode
		<if test="code2 != null and code2 !=''">
			WHERE code2 like concat('%',#{code2,jdbcType=VARCHAR},'%')
		</if>
		LIMIT ${rowStart-1}, 10
	</select>


	<select id="selectCodeOne" parameterType="java.lang.Integer"
		resultType="com.ultarischool.usercode.UsercodeVO">
		SELECT id,code,codename,code1,code2,code3 FROM usercode
		where id = #{id}
	</select>

	<select id="selectByCodeUni" parameterType="java.lang.String"
		resultType="java.lang.String">
		SELECT code FROM usercode
		where code = #{code}
	</select>


	<select id="selectByCode3" parameterType="java.lang.String"
		resultType="com.ultarischool.usercode.UsercodeVO">
		SELECT id,code,codename,code1,code2,code3 FROM usercode
		WHERE code3 =
		#{code3,jdbcType=VARCHAR}
	</select>

	<select id="selectByCode1"
		resultType="com.ultarischool.usercode.UsercodeVO">
		SELECT DISTINCT CODE1 FROM usercode ORDER BY CODE1
	</select>


	<!-- 관리자 중분류 가져오기 -->
	<select id="selectListCode2"
		parameterType="com.ultarischool.usercode.UsercodeExample"
		resultType="com.ultarischool.usercode.UsercodeVO">

		SELECT distinct concat(code1,'-',code2) codename,code2 FROM usercode

		<if test="code1 != null and code1 !=''">
			WHERE code1 = #{code1}
		</if>

		ORDER by CODE1,CODE2

	</select>

	<select id="countAllCode"
		parameterType="com.ultarischool.usercode.UsercodeExample"
		resultType="java.lang.Integer">
		SELECT COUNT(*) FROM usercode
		<if test="code2 != null and code2 !=''">
			WHERE code2 like

			concat('%',#{code2,jdbcType=VARCHAR},'%')
		</if>

	</select>

	<!-- 강사 분야 가져오기 -->
	<select id="selectFieldSep"
		resultType="com.ultarischool.usercode.Separation">
		SELECT ut.sn as usertsn, ut.fieldtypeid AS id, uc.code2 AS
		large,
		uc.code3 AS medium, uc.codename as small FROM usert AS ut JOIN
		usercode AS uc ON ut.fieldtypeid = uc.id
		WHERE ut.usertypeid = 19;
	</select>

</mapper>